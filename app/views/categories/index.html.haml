#categories
  .container
    %ul.categories
      %h1 Categories
      .list
        = render partial: 'category_container', collection: active_categories, as: :category
      .misc
        %span.left= render "new_category_modal"
        %span.right
          %b Total:
          = current_user.total_money
    %ul.selected-category
      %h1.records_for All Records
      %table.tables
        %thead
          %tr
            %th Date
            %th Category
            %th Description
            %th Amount
        %tbody
          - records_by_date.each do |records_array|
            %tr.tables-row
              %td= records_array.first.adjusted_date.strftime("%-m/%d/%y")
              %td= records_array.first.category.name
              %td= records_array.first.description.truncate(20)
              %td= records_array.first.amount

            - records_array[1..-1].each do |record|
              %tr.no_upper_border
                %td
                %td= record.category.name
                %td= record.description.truncate(20)
                %td
                  - if is_negative_amount?(record)
                    %span.red-record.text= record.amount
                  - else
                    %span.blue-record.text= record.amount
          %tr.entire_length
            %td{colspan: '4'}
              %button.load_more Load More
